<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YoursMed King Market</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- 1. LOGIN MODAL -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal-box">
            <button class="btn-close" id="closeLoginModal">&times;</button>
            <h2 class="modal-title">Access Account</h2>
            <div class="form-group"><label>Email</label><input type="email" id="emailInput"></div>
            <div class="form-group"><label>Password</label><input type="password" id="passInput"></div>
            <div class="modal-actions">
                <button class="btn-submit btn-login" id="btnLoginAction">Login</button>
                <button class="btn-submit btn-signup" id="btnSignupAction">Sign Up</button>
            </div>
            <div class="error-msg" id="loginErrorMsg"></div>
        </div>
    </div>

    <!-- 2. DEPOSIT MODAL -->
    <div class="modal-overlay" id="depositModal">
        <div class="modal-box">
            <button class="btn-close" id="closeDepositModal">&times;</button>
            <h2 class="modal-title" style="color:#4caf50;">ğŸ’° Buy Coins (Send Payment This QR code)</h2>

            <!-- â­ ADDED IMAGE HERE â­ -->
            <!-- â­ IMAGE AND DOWNLOAD BUTTON â­ -->
<div style="width:100%; text-align:center; margin-bottom:15px;">
    <img id="depositImage" src="https://i.ibb.co/VYd8MBz5/IMG-20251128-WA0003.jpg" 
         style="width:100%; border-radius:10px;" 
         alt="Deposit Guide">
    <button id="downloadImageBtn" style="margin-top:10px; padding:8px 15px; background:#4caf50; color:#fff; border:none; border-radius:5px; cursor:pointer;">
        â¬‡ Download Image
    </button>
</div>
            <!-- â­ IMAGE END â­ -->

            <div class="admin-account-box">
                <div style="color:#aaa; font-size:0.8em;">Send PKR to:</div>
                <div style="font-weight:bold; color:#fff; font-size:1.1em;">0310-5784772</div>
                <div style="color:#4caf50;">EasyPaisa / JazzCash</div>
                <div style="font-size:0.8em;">Title: Nazim Mustafa</div>
            </div>

            <div class="form-group"><label>Select Coin</label><select id="depCoinSelect"><option>Loading...</option></select></div>
            <div class="form-group"><label>Method</label><select id="depMethod"><option>EasyPaisa</option><option>JazzCash</option><option>Bank</option></select></div>
            <div class="form-group"><label>Sender Name</label><input type="text" id="depSenderName"></div>
            <div class="form-group"><label>Sender Account</label><input type="text" id="depSenderAccount"></div>
            <div class="form-group"><label>Amount (PKR)</label><input type="number" id="depAmountPKR"></div>
            <div class="form-group"><label>TRX ID</label><input type="text" id="depTrxId"></div>
            <div class="pkr-estimate" id="depCoinEst">You Get: 0 Coins</div>
            <button class="btn-submit btn-whatsapp" id="btnSubmitDeposit" style="background:#4caf50;">Submit Deposit</button>
            <div class="success-msg" id="depSuccessMsg"></div>
            <div class="error-msg" id="depErrorMsg"></div>

            <div class="history-box">
                <div class="history-title">ğŸ“œ Deposit History</div>
                <div id="depHistoryList" style="max-height:100px; overflow-y:auto;"></div>
            </div>
        </div>
    </div>

    <!-- 3. WITHDRAWAL MODAL (UPDATED WITH TAX) -->
    <div class="modal-overlay" id="withdrawModal">
        <div class="modal-box">
            <button class="btn-close" id="closeWithdrawModal">&times;</button>
            <h2 class="modal-title" style="color:#ff9800;">ğŸ’¸ PKR Withdrawal</h2>
            <div class="limit-info" id="wdLimitInfo">Loading Limits...</div>

            <div class="form-group">
                <label>Select Coin</label>
                <select id="wdCoinSelect"><option>Loading...</option></select>
                <div class="avail-bal" id="wdAvailBal">Available: 0</div>
            </div>

            <div class="form-group">
                <label>Method</label>
                <select id="wdMethod">
                    <optgroup label="Mobile Wallets">
                        <option value="EasyPaisa">EasyPaisa</option>
                        <option value="JazzCash">JazzCash</option>
                        <option value="SadaPay">SadaPay</option>
                    </optgroup>
                    <optgroup label="Banks">
                        <option value="HBL">HBL</option>
                        <option value="Meezan">Meezan</option>
                        <option value="UBL">UBL</option>
                    </optgroup>
                </select>
            </div>

            <div class="form-group"><label>Account Title</label><input type="text" id="wdName"></div>
            <div class="form-group"><label>Account Number</label><input type="text" id="wdAccount"></div>

            <div class="form-group">
                <label>Amount to Withdraw (Coins)</label>
                <input type="number" id="wdAmount" placeholder="Min 100">
            </div>

            <div class="tax-info-box" id="wdTaxDisplay">
                <div>Fee (20%): <span style="color:#f44336">0</span></div>
                <div>Net Receive: <span style="color:#4caf50">0</span></div>
            </div>
            <div class="pkr-estimate" id="wdPkrEst">Total Value: PKR 0.00</div>

            <button class="btn-submit btn-action" id="btnSubmitWithdraw">Submit Request</button>
            <div class="success-msg" id="wdSuccessMsg"></div>
            <div class="error-msg" id="wdErrorMsg"></div>

            <div class="history-box">
                <div class="history-title">ğŸ“œ Withdrawal History</div>
                <div id="wdHistoryList" style="max-height: 100px; overflow-y: auto;"></div>
            </div>
        </div>
    </div>

    <!-- 4. EXCHANGE MODAL -->
    <div class="modal-overlay" id="exchangeModal">
        <div class="modal-box">
            <button class="btn-close" id="closeExchangeModal">&times;</button>
            <h2 class="modal-title" style="color:#ba68c8;">ğŸ’± Exchange Coins</h2>
            <div class="form-group"><label>From</label><select id="exFromCoin"></select></div>
            <div class="form-group"><label>To</label><select id="exToCoin"></select></div>
            <div class="form-group"><label>Amount</label><input type="number" id="exAmount"></div>

            <div class="exchange-result-box">
                <div id="exCalcResult">Receive: 0 Coins</div>
                <div id="exTaxInfo" style="font-size:0.8em; color:#f44336;">(20% Tax Included)</div>
                <div id="exPkrValue" style="font-size:0.8em; color:#aaa;">(Value: PKR 0.00)</div>
            </div>

            <button class="btn-submit btn-exchange" id="btnSubmitExchange">Convert Now</button>
            <div class="success-msg" id="exSuccessMsg"></div>
            <div class="error-msg" id="exErrorMsg"></div>
        </div>
    </div>

    <!-- 5. REFERRAL MODAL -->
    <div class="modal-overlay" id="referralModal">
        <div class="modal-box">
            <button class="btn-close" id="closeReferralModal">&times;</button>
            <h2 class="modal-title" style="color:#4caf50;">ğŸ“¢ Refer & Earn</h2>
            <p style="text-align:center; color:#aaa; font-size:0.9em;">Invite friends to increase your withdrawal limits!</p>
            <div class="form-group"><label>Your Link</label><div class="ref-link-box" id="myRefLink">Loading...</div></div>
            <button class="btn-submit btn-whatsapp" id="btnShareWhatsapp">ğŸ“² Share on WhatsApp</button>
        </div>
    </div>

    <!-- HEADER -->
    <header class="app-header">
        <div class="profile-sec"><div id="userDisplay"><button class="login-btn" id="openLoginBtn">ğŸ”‘ Login</button></div></div>
        <div class="wallet-sec">
            <span class="wallet-label">TOTAL COINS HOLDING</span>
            <span class="wallet-amount" id="headerWallet">0 <span class="coin-suffix">Coins</span></span>
        </div>
    </header>

    <!-- CONTENT -->
    <div class="container">
        <div class="status-bar" id="marketStatus">Connecting...</div>
        <div class="table-wrapper">
            <table id="coinTable">
                <thead><tr><th>Coin</th><th>Rate (PKR)</th><th>My Coins</th><th>Value (PKR)</th></tr></thead>
                <tbody id="tableBody"><tr><td colspan="4" style="text-align:center; padding:20px; color:#888;">Login to see your coins</td></tr></tbody>
            </table>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="app-footer">
        <div class="footer-item" id="navHome"><span>ğŸ </span>Home</div>
        <div class="footer-item" id="navDeposit"><span>ğŸ’°</span>Deposit</div>
        <div class="footer-item" id="navWithdraw"><span>ğŸ’¸</span>Withdraw</div>
        <div class="footer-item" id="navExchange"><span>ğŸ’±</span>Exchange</div>
        <div class="footer-item" id="navReferral"><span>ğŸ“¢</span>Refer</div>
    </footer>

    <script type="module" src="script.js"></script>
</body>
</html>
