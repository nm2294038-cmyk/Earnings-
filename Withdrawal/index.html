
<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Withdrawal Center</title>
    
    <!-- CSS Link -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>

    <header>
        <h3 style="margin:0;">Withdrawal Center</h3>
        <button id="profileBtn">üë§</button>
    </header>

    <div class="container">
        
        <!-- Not Logged In View -->
        <div id="loginAlert">
            <div style="text-align: center; padding: 40px 0;">
                <h2 style="color: #333;">Welcome Back!</h2>
                <p style="color: #666;">Please login to access your wallet and withdrawal options.</p>
                <div style="font-size: 40px; margin-top: 20px; animation: bounce 2s infinite;">‚òùÔ∏è</div>
            </div>
        </div>

        <!-- Logged In View -->
        <div id="mainContent" style="display:none;">
            
            <div class="info-box">
                <span style="opacity: 0.8;">Available Balance</span>
                <h1 id="balanceDisplay" style="margin: 5px 0; font-size: 2.5em;">0</h1>
                <span style="font-size: 1.1em;">Coins</span>
                <div style="margin-top: 10px; background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; display: inline-block;">
                    My Invites: <b id="inviteDisplay">0</b>
                </div>
            </div>

            <!-- Packages -->
            <label style="display:block; margin-bottom:10px; color:#444;"><strong>Select Package :</strong></label>
            <div class="pkg-grid" id="pkgContainer">
                <!-- JS Generated -->
            </div>

            <!-- Form -->
            <form id="wdForm">
                <div class="form-group">
                    <label>Amount (PKR)</label>
                    <input type="text" id="amountInput" placeholder="Select a package above" readonly>
                    <small id="pkrText" style="color:var(--secondary-color); font-weight:bold;"></small>
                </div>

                <div class="form-group">
                    <label>Select Bank / Wallet</label>
                    <select id="bankSelect" required>
                        <option value="">-- Choose Bank --</option>
                        <optgroup label="Mobile Wallets">
                            <option value="EasyPaisa">EasyPaisa</option>
                            <option value="JazzCash">JazzCash</option>
                            <option value="SadaPay">SadaPay</option>
                            <option value="Nayapay">NayaPay</option>
                        </optgroup>
                        <optgroup label="Major Banks">
                            <option value="HBL">HBL (Habib Bank)</option>
                            <option value="UBL">UBL (United Bank)</option>
                            <option value="Meezan">Meezan Bank</option>
                            <option value="MCB">MCB Bank</option>
                            <option value="Allied">Allied Bank</option>
                            <option value="BankAlfalah">Bank Alfalah</option>
                            <option value="Askari">Askari Bank</option>
                            <option value="Faysal">Faysal Bank</option>
                            <option value="BOP">Bank of Punjab</option>
                        </optgroup>
                    </select>
                </div>

                <div class="form-group">
                    <label>Account Number / IBAN</label>
                    <input type="text" id="accNum" placeholder="e.g. 03105784772" required>
                </div>

                <div class="form-group">
                    <label>Account Holder Name</label>
                    <input type="text" id="accName" placeholder="e.g. Nazim Mustafa " required>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">Submit Withdrawal</button>
            </form>

            <!-- Attractive History Section -->
            <div style="margin-top:40px;">
                <h3 style="border-left: 4px solid var(--primary-color); padding-left: 10px;">Recent Activity</h3>
                <div id="historyBox" class="history-grid">
                    <p style="text-align:center; color:#999;">Loading history...</p>
                </div>
            </div>

        </div>
    </div>

    <!-- AUTH MODAL -->
    <div id="authModal" class="modal">
        <div class="modal-box">
            <span class="close" id="closeAuthModal">&times;</span>
            <h3 id="authHeader" style="margin-top:0;">Login</h3>
            <form id="authForm">
                <input type="email" id="email" placeholder="Email Address" style="width:100%; padding:12px; margin-bottom:10px; border:1px solid #ddd; border-radius:5px;" required>
                <input type="password" id="pass" placeholder="Password" style="width:100%; padding:12px; margin-bottom:15px; border:1px solid #ddd; border-radius:5px;" required>
                <button type="submit" style="width:100%; padding:12px; background:var(--primary-color); color:white; border:none; border-radius:5px; font-weight:bold; cursor:pointer;">Continue</button>
            </form>
            <p id="toggleAuthBtn" style="color:var(--primary-color); cursor:pointer; margin-top:15px; font-size:0.9em;">New User? Create Account</p>
            <button id="logoutBtn" style="background:#eee; color:#333; border:none; padding:8px 15px; border-radius:4px; margin-top:10px; display:none; cursor:pointer;">Logout</button>
        </div>
    </div>

    <!-- INVITE MODAL -->
    <div id="inviteModal" class="modal">
        <div class="modal-box">
            <span class="close" id="closeInviteModal">&times;</span>
            <div style="font-size:50px; margin-bottom:10px;">üë•</div>
            <h3>More Invites Needed!</h3>
            <p style="color:#666;">This package is locked.</p>
            
            <div style="background:#fff8e1; border: 1px solid #ffe082; padding:15px; border-radius:8px; margin:15px 0;">
                <p style="margin:0; font-size:0.9em;">Required Invites</p>
                <h2 style="margin:5px 0; color:#ff8f00;">1000</h2>
                <p style="margin:0; font-size:0.8em; color:#666;">You Have: <b id="myCurrentInvites">0</b></p>
            </div>

            <button class="whatsapp-btn" onclick="shareLink()">
                <span>Share on WhatsApp</span> üöÄ
            </button>
        </div>
    </div>

    <!-- JavaScript Link -->
    <script src="script.js"></script>

</body>
</html>
