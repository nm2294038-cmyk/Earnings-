<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YoursMed King Market</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- 1. LOGIN MODAL -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal-box">
            <button class="btn-close" id="closeLoginModal">&times;</button>
            <h2 class="modal-title">Access Account</h2>
            <div class="form-group"><label>Email</label><input type="email" id="emailInput"></div>
            <div class="form-group"><label>Password</label><input type="password" id="passInput"></div>
            <div class="modal-actions">
                <button class="btn-submit btn-login" id="btnLoginAction">Login</button>
                <button class="btn-submit btn-signup" id="btnSignupAction">Sign Up</button>
            </div>
            <div class="error-msg" id="loginErrorMsg"></div>
        </div>
    </div>

    <!-- 2. WITHDRAWAL MODAL -->
    <div class="modal-overlay" id="withdrawModal">
        <div class="modal-box">
            <button class="btn-close" id="closeWithdrawModal">&times;</button>
            <h2 class="modal-title" style="color:#ff9800;">ğŸ’¸ PKR Withdrawal</h2>
            
            <!-- LIMIT INFO -->
            <div class="limit-info" id="wdLimitInfo">Loading Limits...</div>

            <div class="form-group">
                <label>Select Coin</label>
                <select id="wdCoinSelect"><option>Loading...</option></select>
                <div class="avail-bal" id="wdAvailBal">Available: 0</div>
            </div>

            <div class="form-group">
                <label>Method</label>
                <select id="wdMethod">
                    <optgroup label="Mobile Wallets">
                        <option value="EasyPaisa">EasyPaisa</option>
                        <option value="JazzCash">JazzCash</option>
                        <option value="SadaPay">SadaPay</option>
                    </optgroup>
                    <optgroup label="Banks">
                        <option value="HBL">HBL</option>
                        <option value="Meezan">Meezan Bank</option>
                        <option value="UBL">UBL</option>
                        <option value="MCB">MCB</option>
                        <option value="Allied">Allied Bank</option>
                    </optgroup>
                </select>
            </div>

            <div class="form-group"><label>Account Title</label><input type="text" id="wdName" placeholder="e.g. Ali Khan"></div>
            <div class="form-group"><label>Account Number</label><input type="text" id="wdAccount" placeholder="03001234567"></div>
            <div class="form-group"><label>Amount (Coins)</label><input type="number" id="wdAmount" placeholder="Min 100"></div>

            <div class="pkr-estimate" id="wdPkrEst">Total Value: PKR 0.00</div>

            <button class="btn-submit btn-action" id="btnSubmitWithdraw">Submit Request</button>
            <div class="success-msg" id="wdSuccessMsg"></div>
            <div class="error-msg" id="wdErrorMsg"></div>

            <div class="history-box">
                <div class="history-title">ğŸ“œ My Requests Status</div>
                <div id="wdHistoryList" style="max-height: 120px; overflow-y: auto;"></div>
            </div>
        </div>
    </div>

    <!-- 3. EXCHANGE MODAL -->
    <div class="modal-overlay" id="exchangeModal">
        <div class="modal-box">
            <button class="btn-close" id="closeExchangeModal">&times;</button>
            <h2 class="modal-title" style="color:#ba68c8;">ğŸ’± Exchange Coins</h2>
            <div class="form-group"><label>From</label><select id="exFromCoin"></select></div>
            <div class="form-group"><label>To</label><select id="exToCoin"></select></div>
            <div class="form-group"><label>Amount</label><input type="number" id="exAmount" placeholder="0"></div>
            <div style="text-align:center; color:#00e676; margin-bottom:10px;" id="exCalcResult">Receive: 0</div>
            <button class="btn-submit btn-exchange" id="btnSubmitExchange">Convert Now</button>
            <div class="success-msg" id="exSuccessMsg"></div>
            <div class="error-msg" id="exErrorMsg"></div>
        </div>
    </div>

    <!-- 4. REFERRAL MODAL -->
    <div class="modal-overlay" id="referralModal">
        <div class="modal-box">
            <button class="btn-close" id="closeReferralModal">&times;</button>
            <h2 class="modal-title" style="color:#4caf50;">ğŸ“¢ Refer & Earn</h2>
            <p style="text-align:center; color:#aaa; font-size:0.9em;">Invite friends to increase your withdrawal limits!</p>
            <div class="form-group">
                <label>Your Referral Link</label>
                <div class="ref-link-box" id="myRefLink">Loading...</div>
            </div>
            <button class="btn-submit btn-whatsapp" id="btnShareWhatsapp">ğŸ“² Share on WhatsApp</button>
        </div>
    </div>

    <!-- HEADER -->
    <header class="app-header">
        <div class="profile-sec">
            <div id="userDisplay"><button class="login-btn" id="openLoginBtn">ğŸ”‘ Login</button></div>
        </div>
        <div class="wallet-sec">
            <span class="wallet-label">TOTAL COINS HOLDING</span>
            <span class="wallet-amount" id="headerWallet">0 <span class="coin-suffix">Coins</span></span>
        </div>
    </header>

    <!-- CONTENT -->
    <div class="container">
        <div class="status-bar" id="marketStatus">Connecting...</div>
        <table id="coinTable">
            <thead>
                <tr><th>Coin</th><th>Rate (PKR)</th><th>My Coins</th><th>Value (PKR)</th></tr>
            </thead>
            <tbody id="tableBody">
                <tr><td colspan="4" style="text-align:center; padding:20px; color:#888;">Login to see your coins</td></tr>
            </tbody>
        </table>
    </div>

    <!-- FOOTER -->
    <footer class="app-footer">
        <div class="footer-item" id="navHome"><span>ğŸ </span>Home</div>
        <div class="footer-item" id="navExchange"><span>ğŸ’±</span>Exchange</div>
        <div class="footer-item" id="navWithdraw"><span>ğŸ’¸</span>Withdraw</div>
        <div class="footer-item" id="navReferral"><span>ğŸ“¢</span>Refer</div>
    </footer>

    <!-- JAVASCRIPT LINK -->
    <script type="module" src="script.js"></script>
</body>
</html>
