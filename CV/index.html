<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive CV Editor - Final Clean Print</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        /* Define CSS Variables for easy customization */
        :root {
            --primary-color: #0056b3; 
            --secondary-color: #007bff; 
            --text-color: #333;
            --bg-color: white; 
            --logo-bg-color: white; 
            --font-family: 'Arial', sans-serif;
        }

        body {
            font-family: var(--font-family);
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-color);
        }

        /* ------------------- HEADER CONTROL PANEL STYLES ------------------- */
        .controls-header {
            position: sticky;
            top: 0;
            width: 100%;
            background: #fff;
            padding: 10px 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            margin-bottom: 20px;
            box-sizing: border-box;
        }
        
        .control-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 5px 0;
            border-bottom: 1px solid #eee;
            align-items: center;
        }

        .control-group h4 { margin: 0; padding-right: 15px; color: var(--primary-color); }
        .controls-header label { font-size: 12px; font-weight: bold; }

        .controls-header select, 
        .controls-header input[type="color"], 
        .controls-header input[type="number"],
        .controls-header button:not(#save-pdf-btn-footer) {
            padding: 3px 6px;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 12px;
            cursor: pointer;
            vertical-align: middle;
        }
        
        .format-btn { background-color: #f0f0f0; font-weight: bold; width: 30px; height: 30px; line-height: 1; padding: 0; }

        /* ------------------- CV STYLES (PC/Desktop Base) ------------------- */
        .cv-container {
            width: 100%;
            max-width: 800px; 
            background-color: var(--bg-color); 
            padding: 20px 30px; 
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            position: relative;
            font-size: 12px;
            line-height: 1.3;
            min-height: 1100px;
            
            background-image: 
                linear-gradient(135deg, rgba(200, 200, 255, 0.1) 0%, rgba(255, 255, 255, 0) 50%),
                linear-gradient(315deg, rgba(200, 200, 255, 0.1) 0%, rgba(255, 255, 255, 0) 50%);
            background-repeat: no-repeat;
            background-position: top right, bottom left;
            background-size: 80% 80%;
        }

        /* --- Identity/Header Layout (PC Default) --- */
        .identity { margin-bottom: 8px; position: relative; display: flex; justify-content: space-between; align-items: flex-start; }
        .contact-info { line-height: 1.2; font-size: 12px; margin-left: 120px; max-width: 60%; }
        .profile-pic-container { width: 80px; height: 100px; position: absolute; top: 0; right: 0; border: 1px solid var(--primary-color); cursor: pointer; overflow: hidden; background-color: #d1eaff; }
        .logo-box { width: 100px; height: 100px; position: absolute; top: 0; left: 0; box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1); display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 5px; background-color: var(--logo-bg-color); }
        
        #profile-image { width: 100%; height: 100%; object-fit: cover; display: block; }
        .contact-info strong { font-size: 17px; color: var(--primary-color); }
        .logo-box .large-c { font-size: 70px; line-height: 0.7; } 
        .section { margin-top: 10px; }
        .section-title { font-size: 18px; color: var(--primary-color); padding-bottom: 2px; margin-bottom: 4px; display: inline-block; position: relative; font-weight: normal; }
        .section-title::after { content: ''; position: absolute; left: 0; right: 0; bottom: 0; border-bottom: 2px double var(--primary-color); }
        .profile-list li, .education-list li { margin-bottom: 0px; font-size: 12px; line-height: 1.2; display: flex; }
        .profile-list .label, .education-list .label { width: 120px; font-weight: bold; }
        .skills-list li::before, .language-list li::before { content: "•"; color: var(--secondary-color); }
        
        /* CRITICAL FOR SCREEN: Editable box border */
        [contenteditable="true"] { border: 1px dashed #ccc; padding: 1px; cursor: text; }
        [contenteditable="true"]:focus { border-color: var(--secondary-color); outline: none; }
        .add-item-btn { background: #eee; border: 1px dashed #ccc; color: #555; font-size: 11px; padding: 3px 8px; margin-top: 5px; cursor: pointer; display: block; width: 150px; text-align: left; }
        .remove-btn { color: red; font-weight: bold; margin-left: 10px; cursor: pointer; font-size: 14px; }


        /* ------------------- FOOTER STYLES ------------------- */
        .cv-footer { width: 100%; max-width: 800px; padding: 20px 0; text-align: center; margin-top: 20px; }
        #save-pdf-btn-footer { background-color: #28a745; color: white; font-size: 20px; font-weight: bold; padding: 15px 30px; border: none; border-radius: 5px; cursor: pointer; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }

        
        /* ================================================= */
        /* ============= MOBILE VIEW ADJUSTMENTS ============= */
        /* ================================================= */
        @media (max-width: 768px) {
            .cv-container { padding: 15px; box-shadow: none; min-height: auto; }
            .control-group { gap: 8px; justify-content: space-between; border-bottom: none; padding: 5px 0; }
            .control-group h4 { width: 100%; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .controls-header select, .controls-header input { flex-grow: 1; }
            .identity { flex-direction: column; align-items: center; margin-bottom: 20px; padding-top: 110px; }
            .logo-box { position: absolute; top: 0; left: 10px; }
            .profile-pic-container { position: absolute; top: 0; right: 10px; }
            .contact-info { margin-left: 0; text-align: center; max-width: 100%; }
            .skills-list li, .language-list li { width: 100%; }
            .profile-list li, .education-list li { flex-direction: column; }
            .profile-list .label, .education-list .label { width: auto; font-size: 13px; }
            .profile-list .value, .education-list .value { padding-left: 15px; font-size: 12px; }
        }
        
        /* ================================================= */
        /* =================== PRINT STYLES =================== */
        /* ================================================= */
        @page { size: A4; margin: 0.25in; }
        @media print {
            /* HIDE ALL CONTROLS AND EDITING MARKS */
            .controls-header, 
            .cv-footer, 
            .add-item-btn, 
            .remove-btn,
            .format-btn { 
                display: none !important; 
            }
            
            /* CRITICAL: Remove all editing borders and padding */
            [contenteditable="true"] { 
                border: none !important; 
                padding: 0 !important; 
                outline: none !important;
            }

            /* Force desktop layout for clean A4 print */
            .identity { 
                padding-top: 0 !important; 
                flex-direction: row !important;
                align-items: flex-start !important;
            }
            .logo-box { left: 0 !important; }
            .profile-pic-container { right: 0 !important; }
            .contact-info { margin-left: 120px !important; text-align: left !important; }
            .skills-list li, .language-list li { width: 49% !important; }
            .profile-list li, .education-list li { flex-direction: row !important; }
            .profile-list .value, .education-list .value { padding-left: 0 !important; }
            .profile-list .label, .education-list .label { width: 120px !important; }


            /* Final print container styles */
            .cv-container {
                font-size: 9.5pt; 
                padding: 10px 15px; 
                box-shadow: none;
                background-image: none; 
                min-height: auto;
                margin: 0;
            }
            body { padding: 0; margin: 0; background: white; }
        }
    </style>
</head>
<body>

    <!-- [Control Panel, CV Content, Footer remain the same as the previous version] -->
    <div class="controls-header">
        
        <!-- Group 1: Text Formatting Controls -->
        <div class="control-group">
            <h4>Text Tools:</h4>
            <button class="format-btn" onclick="formatText('bold')" title="Bold">B</button>
            <button class="format-btn" onclick="formatText('italic')" title="Italic">I</button>
            <button class="format-btn" onclick="formatText('underline')" title="Underline">U</button>
            
            <label>Size:</label>
            <input type="number" id="font-size-input" value="12" min="8" max="72" style="width: 50px;" onchange="formatText('fontSize', this.value)">
            
            <label>Color:</label>
            <input type="color" id="font-color-picker" onchange="formatText('foreColor', this.value)">
        </div>

        <!-- Group 2: Design Controls -->
        <div class="control-group">
            <h4>Design:</h4>
            
            <label>Main Color:</label>
            <input type="color" id="primary-color-picker" value="#0056b3" onchange="updateDesign()">
            
            <label>Highlight Color:</label>
            <input type="color" id="secondary-color-picker" value="#007bff" onchange="updateDesign()">

            <label>CV BG Color:</label>
            <input type="color" id="bg-color-picker" value="#ffffff" onchange="updateDesign()">
            
            <label>Logo BG Color:</label>
            <input type="color" id="logo-bg-color-picker" value="#ffffff" onchange="updateDesign()">

            <label>Font:</label>
            <select id="font-family-select" onchange="updateDesign()">
                <option value="'Arial', sans-serif">Arial</option>
                <option value="'Roboto', sans-serif">Roboto</option>
                <option value="'Playfair Display', serif">Playfair Display</option>
            </select>
        </div>
    </div>

    <!-- ================================================= -->
    <!-- ==================== CV AREA ==================== -->
    <!-- ================================================= -->
    <div class="cv-container">
        
        <!-- Header Section -->
        <div class="identity">
            
            <div class="logo-box">
                <span class="large-c">C</span>
                <span class="large-v">V</span>
                <div class="text">urriculum<br>itae</div>
            </div>

            <div class="contact-info">
                <p><strong><span contenteditable="true">Nazim Mustafa</span></strong></p>
                <p contenteditable="true">Village Ganial p/o Gattar</p>
                <p contenteditable="true">Tehsil Sohawa District Jhelum</p>
                <p>Cell : <span contenteditable="true">0346-0508583</span></p>
            </div>
            
            <div class="profile-pic-container" id="pic-upload-area" title="تصویر شامل کرنے کے لیے کلک کریں">
                <img id="profile-image" src="https://via.placeholder.com/80x100/d1eaff/0056b3?text=Click+to+Add+Pic" alt="Profile Picture">
            </div>

        </div>

        <!-- Objective Section -->
        <div class="section">
            <h2 class="section-title" contenteditable="true">Objective</h2>
            <p contenteditable="true">To work with dedication & honesty in a growing and challenging environment that can best utilize my expertise.</p>
        </div>
        
        <!-- Personal Profile Section -->
        <div class="section">
            <h2 class="section-title" contenteditable="true">Personal Profile:</h2>
            <ul class="profile-list">
                <li><span class="label">Full Name</span> : <span class="value" contenteditable="true">Nazim Mustafa</span></li>
                <li><span class="label">Father Name</span> : <span class="value" contenteditable="true">Ghulam Mustafa</span></li>
                <li><span class="label">CNIC No.</span> : <span class="value" contenteditable="true">37303-8235746-1</span></li>
                <li><span class="label">Marital Status</span> : <span class="value" contenteditable="true">Single</span></li>
                <li><span class="label">Date of Birth</span> : <span class="value" contenteditable="true">21-02-2000</span></li>
                <li><span class="label">Religion</span> : <span class="value" contenteditable="true">Islam</span></li>
            </ul>
        </div>

        <!-- Education Section -->
        <div class="section">
            <h2 class="section-title" contenteditable="true">Education:</h2>
            <ul class="education-list" id="education-list">
                <li>
                    <span class="label" contenteditable="true">Matric (Science)</span> : 
                    <span class="value" contenteditable="true">634/1100</span>
                    <span class="remove-btn" onclick="removeItem(this)">[X]</span>
                </li>
            </ul>
            <button class="add-item-btn" onclick="addItem('education')">+ Add Education</button>
        </div>

        <!-- Skills Section -->
        <div class="section">
            <h2 class="section-title" contenteditable="true">Skills:</h2>
            <ul class="skills-list" id="skills-list">
                <li contenteditable="true">Auto CAD <span class="remove-btn" onclick="removeItem(this)">[X]</span></li>
                <li contenteditable="true">Basic Computer <span class="remove-btn" onclick="removeItem(this)">[X]</span></li>
                <li contenteditable="true">Technical Drawing <span class="remove-btn" onclick="removeItem(this)">[X]</span></li>
                <li contenteditable="true">Problem Solving <span class="remove-btn" onclick="removeItem(this)">[X]</span></li>
            </ul>
            <button class="add-item-btn" onclick="addItem('skill')">+ Add Skill</button>
        </div>

        <!-- Language Skills Section -->
        <div class="section">
            <h2 class="section-title" contenteditable="true">Language Skills:</h2>
            <ul class="language-list" id="language-list">
                <li contenteditable="true">Urdu <span class="remove-btn" onclick="removeItem(this)">[X]</span></li>
                <li contenteditable="true">English <span class="remove-btn" onclick="removeItem(this)">[X]</span></li>
                <li contenteditable="true">Punjabi <span class="remove-btn" onclick="removeItem(this)">[X]</span></li>
            </ul>
            <button class="add-item-btn" onclick="addItem('language')">+ Add Language</button>
        </div>
        
        <!-- Reference Section -->
        <div class="section reference">
            <h2 class="section-title" contenteditable="true">Reference:</h2>
            <p contenteditable="true">✔ Reference will be on your request.</p>
        </div>

    </div>

    <!-- ================================================= -->
    <!-- ==================== FOOTER ===================== -->
    <!-- ================================================= -->
    <div class="cv-footer">
        <button id="save-pdf-btn-footer" onclick="window.print()">
            CV کو PDF میں محفوظ کریں
        </button>
    </div>


    <script>
        // --- 1. Core Formatting Functions ---
        function formatText(command, value) {
            if (command === 'fontSize') {
                document.execCommand(command, false, value + 'px');
            } else if (command === 'foreColor') {
                document.execCommand(command, false, value);
            } else {
                document.execCommand(command, false, null);
            }
        }

        // --- 2. Design Update Logic ---
        function updateDesign() {
            const primaryColor = document.getElementById('primary-color-picker').value;
            const secondaryColor = document.getElementById('secondary-color-picker').value;
            const bgColor = document.getElementById('bg-color-picker').value;
            const logoBgColor = document.getElementById('logo-bg-color-picker').value;
            const fontFamily = document.getElementById('font-family-select').value;
            
            document.documentElement.style.setProperty('--primary-color', primaryColor);
            document.documentElement.style.setProperty('--secondary-color', secondaryColor);
            document.documentElement.style.setProperty('--bg-color', bgColor);
            document.documentElement.style.setProperty('--logo-bg-color', logoBgColor);
            document.documentElement.style.setProperty('--font-family', fontFamily);
        }

        // --- 3. Dynamic List Management ---
        function addItem(type) {
            let ul, newLi;

            if (type === 'education') {
                ul = document.getElementById('education-list');
                newLi = document.createElement('li');
                newLi.innerHTML = `
                    <span class="label" contenteditable="true">New Degree</span> : 
                    <span class="value" contenteditable="true">Details (e.g., Year/Marks)</span>
                    <span class="remove-btn" onclick="removeItem(this)">[X]</span>
                `;
            } else if (type === 'skill') {
                ul = document.getElementById('skills-list');
                newLi = document.createElement('li');
                newLi.setAttribute('contenteditable', 'true');
                newLi.innerHTML = `New Skill <span class="remove-btn" onclick="removeItem(this)">[X]</span>`;
            } else if (type === 'language') {
                ul = document.getElementById('language-list');
                newLi = document.createElement('li');
                newLi.setAttribute('contenteditable', 'true');
                newLi.innerHTML = `New Language <span class="remove-btn" onclick="removeItem(this)">[X]</span>`;
            }
            
            if (newLi) {
                ul.appendChild(newLi);
            }
        }

        function removeItem(element) {
            element.parentElement.remove();
        }

        // --- 4. Image Upload Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            const profileImage = document.getElementById('profile-image');
            const picUploadArea = document.getElementById('pic-upload-area');

            function loadPicFromLink(url) {
                if (url) {
                    profileImage.src = url;
                    profileImage.style.display = 'block';
                }
            }

            picUploadArea.addEventListener('click', function() {
                const newUrl = prompt("براہ کرم اپنی تصویر کا آن لائن لنک (URL) یہاں پیسٹ کریں:");
                if (newUrl) {
                    loadPicFromLink(newUrl);
                }
            });
            
            updateDesign(); 
        });
    </script>

</body>
</html>
