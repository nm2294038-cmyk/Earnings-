<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YoursMed King Market - Deposit & Wallet</title>
    <!-- Link to the external CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <!-- 1. LOGIN MODAL -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal-box">
            <button class="btn-close" id="closeLoginModal">&times;</button>
            <h2 class="modal-title">Access Account</h2>
            <div class="form-group"><label>Email</label><input type="email" id="emailInput"></div>
            <div class="form-group"><label>Password</label><input type="password" id="passInput"></div>
            <div class="modal-actions">
                <button class="btn-submit btn-login" id="btnLoginAction" style="background:#2563eb;">Login</button>
                <button class="btn-submit btn-signup" id="btnSignupAction" style="background:#4caf50;">Sign Up</button>
            </div>
            <div class="error-msg" id="loginErrorMsg"></div>
        </div>
    </div>

    <!-- 2. DEPOSIT MODAL (Content is now fully here) -->
    <div class="modal-overlay" id="depositModal"> 
        <div class="modal-box">
            <button class="btn-close" id="closeDepositModal">&times;</button>
            <h2 class="modal-title" style="color:#4caf50;">ðŸ’° Buy Coins (Deposit)</h2>

            <!-- Image and Guide -->
            <div style="width:100%; text-align:center; margin-bottom:15px;">
                <img id="depositImage" src="https://i.ibb.co/VYd8MBz5/IMG-20251128-WA0003.jpg" 
                    style="width:100%; border-radius:10px;" 
                    alt="Deposit Guide">
                <button id="downloadImageBtn" style="margin-top:10px; padding:8px 15px; background:#4caf50; color:#fff; border:none; border-radius:5px; cursor:pointer;">
                    â¬‡ Download Image
                </button>
            </div>

            <!-- Admin Account Info -->
            <div class="admin-account-box">
                <div style="color:#aaa; font-size:0.8em;">Send PKR to:</div>
                <div style="font-weight:bold; color:#fff; font-size:1.1em;">0310-5784772</div>
                <div style="color:#4caf50;">EasyPaisa / JazzCash</div>
                <div style="font-size:0.8em;">Title: Nazim Mustafa</div>
            </div>

            <!-- Deposit Form Fields -->
            <div class="form-group"><label>Select Coin</label><select id="depCoinSelect"><option>Loading...</option></select></div>
            <div class="form-group"><label>Method</label><select id="depMethod"><option>EasyPaisa</option><option>JazzCash</option><option>Bank</option></select></div>
            <div class="form-group"><label>Sender Name</label><input type="text" id="depSenderName"></div>
            <div class="form-group"><label>Sender Account</label><input type="text" id="depSenderAccount"></div>
            <div class="form-group"><label>Amount (PKR)</label><input type="number" id="depAmountPKR"></div>
            <div class="form-group"><label>TRX ID</label><input type="text" id="depTrxId"></div>
            <div class="pkr-estimate" id="depCoinEst">You Get: 0 Coins</div>
            <button class="btn-submit btn-whatsapp" id="btnSubmitDeposit">Submit Deposit</button>
            <div class="success-msg" id="depSuccessMsg"></div>
            <div class="error-msg" id="depErrorMsg"></div>

            <!-- Deposit History -->
            <div class="history-box">
                <div class="history-title">ðŸ“œ Your Deposit History</div>
                <div id="depHistoryList" style="max-height:150px; overflow-y:auto; padding-right:5px;">Login to view history</div>
            </div>
        </div>
    </div>

    <!-- HEADER -->
    <header class="app-header">
        <div class="profile-sec">
            <button class="deposit-btn-header" id="openDepositModalHeader">ðŸ’° Deposit</button>
            <div id="userDisplay">
                <button class="login-btn" id="openLoginBtn">ðŸ”‘ Login</button>
            </div>
        </div>
        <div class="wallet-sec">
            <span class="wallet-label">TOTAL COINS HOLDING</span>
            <span class="wallet-amount" id="headerWallet">0 <span class="coin-suffix">Coins</span></span>
        </div>
    </header>

    <!-- CONTENT CONTAINER for Dashboard/Wallet Table -->
    <div class="content-container">
        <div class="wallet-dashboard">
            <h2>ðŸ“Š Market Dashboard / Your Wallet</h2>
            <table class="wallet-table">
                <thead>
                    <tr>
                        <th>Coin</th>
                        <th>Rate (PKR)</th>
                        <th>Your Balance</th>
                    </tr>
                </thead>
                <tbody id="walletTableBody">
                    <tr><td colspan="3" style="text-align:center; color:#888;">Please log in to see your coin balances.</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script type="module" src="script.js"></script>
</body>
</html>
