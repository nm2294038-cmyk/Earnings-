<!DOCTYPE html>
<html>
<head>
  <title>Free Earnings App</title>
  <style>
    body { font-family: Arial; margin:0; background:#0d0d0d; color:#fff; }
    header { background:#0ff; color:#000; padding:15px; text-align:center; font-size:24px; font-weight:bold; text-shadow:0 0 5px #0ff; }
    nav { display:flex; flex-wrap:wrap; justify-content:space-around; background:#111; padding:10px 0; }
    nav button { background:#0ff; border:none; padding:10px 15px; margin:5px; color:#000; font-weight:bold; border-radius:8px; cursor:pointer; transition:.3s; }
    nav button:hover { box-shadow:0 0 10px #0ff; }
    section { display:none; padding:20px; }
    section.active { display:block; }

    /* Input and Buttons */
    input, select, textarea { padding:10px; margin:5px 0; border-radius:8px; border:none; width:100%; box-sizing:border-box; background-color: #222; color: #fff; }
    button.submitBtn { background:#0ff; color:#000; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; font-weight:bold; transition:.3s; }
    button.submitBtn:hover { box-shadow:0 0 10px #0ff; background: #fff; color: #000; }
    button.submitBtn:disabled { background: #555; color: #aaa; cursor: not-allowed; box-shadow: none; }
    #authSection { max-width:400px; margin:auto; padding-top:50px; }

    /* --- STYLES for Dashboard, Task, Withdraw Boxes --- */
    .dashboard-container, #tasksContainer, #withdrawList, #linksContainer {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
    }

    .dashboard-box, .taskBox, .withdrawBox {
        background: #111;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 10px #0ff;
        min-width: 200px; /* Set a minimum width */
        text-align: center;
        flex-grow: 1;
        max-width: 250px; /* Set a maximum width for consistency */
    }

    .linkBox {
      background:#111;
      margin:10px 0;
      padding:15px;
      border-radius:10px;
      box-shadow:0 0 10px #0ff;
      display: flex; /* Use flexbox for alignment */
      justify-content: space-between; /* Space out description and button */
      align-items: center; /* Vertically align items */
      min-width: 200px;
      flex-grow: 1;
      max-width: 250px;
    }

    /* --- UPDATED FOOTER STYLE --- */
    footer {
        background:#111;
        padding: 10px 0;
        text-align:center;
        margin-top:30px;
        border-top:2px solid #0ff;
        width: 100%;
        height: 70px; /* Fixed height as requested */
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: center; /* Vertically center content */
        align-items: center; /* Horizontally center content */
    }
    .footer-links { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-bottom: 5px; }
    .footer-links a { color: #0ff; text-decoration: none; font-weight: bold; cursor: pointer; white-space: nowrap; /* Prevent breaking of link text */ }
    .footer-links a:hover { text-decoration: underline; }
    footer .copyright { font-size:12px; color:#888; margin:0; }


    /* Modal Styles */
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.7);
    }
    .modal-content {
        background-color: #111;
        color: #fff;
        margin: 10% auto;
        padding: 30px;
        border: 1px solid #0ff;
        border-radius: 10px;
        width: 80%;
        max-width: 700px;
        box-shadow: 0 0 20px #0ff;
        position: relative;
    }
    .modal-close-btn {
        color: #fff;
        position: absolute;
        top: 15px;
        right: 25px;
        font-size: 30px;
        font-weight: bold;
        cursor: pointer;
    }
    .modal-close-btn:hover { color: #0ff; }
    .modal-content h2 { color: #0ff; }
    .modal-content p { line-height: 1.6; text-align: left; }
    .modal-content ul { text-align: left; list-style-position: inside; }

    #tasks { width: 100%; box-sizing: border-box; }

    /* --- NEW STYLES FOR PROFILE SECTION --- */
    .profile-card {
        background: #111;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        max-width: 450px;
        width: 90%;
        margin: 30px auto;
        text-align: center;
    }

    .profile-header {
        margin-bottom: 20px;
    }

    .profile-pic {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #0ff;
        box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        background-color: #333; /* Fallback background for initials */
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 40px;
        font-weight: bold;
        color: white;
    }

    .profile-info h2 {
        margin: 10px 0 5px 0;
        color: #0ff;
        font-size: 28px;
    }

    .profile-info p {
        margin: 5px 0;
        color: #ccc;
        font-size: 16px;
    }

    .profile-info p.referral-code {
        font-weight: bold;
        color: #fff;
        background: #222;
        padding: 5px 10px;
        border-radius: 5px;
        display: inline-block;
        margin-top: 10px;
    }

    .profile-stats {
        margin: 25px 0;
        padding: 15px 0;
        border-top: 1px solid #333;
        border-bottom: 1px solid #333;
        display: flex;
        justify-content: space-around;
    }

    .stat-item p {
        margin: 0;
        color: #aaa;
        font-size: 14px;
    }

    .stat-item h3 {
        margin: 5px 0 0 0;
        color: #fff;
        font-size: 20px;
    }

    .profile-actions {
        margin-top: 20px;
    }

    .profile-actions button {
        background: #0ff;
        color: #000;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: .3s;
        font-size: 16px;
    }

    .profile-actions button:hover {
        box-shadow: 0 0 10px #0ff;
        background: #fff;
        color: #000;
    }

    /* Withdrawal status specific styles */
    .status-pending { color: #ffc107; font-weight: bold; }
    .status-approved { color: #28a745; font-weight: bold; }
    .status-rejected { color: #dc3545; font-weight: bold; }
  </style>
</head>
<body>

<header>Free Earnings App</header>

<!-- Auth and Nav sections remain the same -->
<section id="authSection">
  <h2>Sign Up / Login</h2>
  <input type="text" id="signupName" placeholder="Name"><br>
  <input type="email" id="signupEmail" placeholder="Email"><br>
  <input type="password" id="signupPassword" placeholder="Password"><br>
  <button id="signupBtn" class="submitBtn">Sign Up</button>
  <hr style="border-color:#0ff;">
  <input type="email" id="loginEmail" placeholder="Email"><br>
  <input type="password" id="loginPassword" placeholder="Password"><br>
  <button id="loginBtn" class="submitBtn">Login</button>
</section>

<nav style="display:none;">
  <button data-section="dashboard">Dashboard</button>
  <button data-section="tasks">Tasks</button>
  <button data-section="referrals">Referral Earnings</button>
  <button data-section="links">Links Open Earnings</button>
  <button data-section="withdrawals">Withdrawal</button>
  <button data-section="profile">Profile</button>
  <button id="logoutBtn">Logout</button>
</nav>

<!-- --- DASHBOARD HTML STRUCTURE --- -->
<section id="dashboard">
  <h2>Dashboard</h2>
  <h3>Any Problem Contact Owner </h3>
  <div class="dashboard-container">
    <div class="dashboard-box">
      <p>Total Users</p>
      <h3 id="totalUsers">0</h3>
    </div>
    <div class="dashboard-box">
      <p>Active Tasks</p>
      <h3 id="totalTasks">0</h3>
    </div>
    <div class="dashboard-box">
      <p>Total Withdrawals</p>
      <h3 id="totalWithdrawals">0</h3>
    </div>
    <div class="dashboard-box">
      <p>Total Earnings</p>
      <h3 id="totalEarnings">0</h3>
    </div>
    <div class="dashboard-box">
      <p>Wallet Balance</p>
      <h3>â‚¹<span id="walletBalance">0</span></h3>
    </div>
  </div>
</section>

<section id="tasks">
  <h2>Tasks</h2>
<p> Ab 5 minutes k bad open house gi</p>
  <div id="tasksContainer"></div>
</section>

<section id="referrals">
  <h2>Referral Earnings</h2>
  <p>Your Referral Link:</p>
  <input type="text" id="refLink" readonly>
  <h3>Referral Users:</h3>
  <div id="refUsers"></div>
</section>

<section id="links">
  <h2>Links Open Earnings</h2>
  <div id="linksContainer"></div>
</section>

<section id="withdrawals">
  <h2>Withdrawals</h2>
 <li> How to get the date of your payment
Payment dates are 19-22 and 28-31 of each month, from 9.00 am till 6.00 pm GMT.</li>
 <li> If these dates fall on weekends or holidays the payments will be processed on nearest business day.
Once you reach the minimum payout amount, the money is put on a two-week hold.
You will get the payout during the first payment period available after your hold period ends.</li>

 <li> For example:</li>
 <li> You reach the minimum payout amount on June 19. The two-week hold period ends on July 31. The next available payment period is July 19-22.</li>
 <li> You reach the minimum payout amount on June 26. The two-week hold period ends on July 14. The next available payment period is July 28-31.</li>

<li> In the Help Center, you can find a list of all the payment methods we offer. Please keep in mind that the availability of these payment methods may vary depending on your account.</li>
              
           <li>  This policy outlines the terms for withdrawing funds from your FreeEarnings App wallet and the specific rules governing the use and withdrawal fund</li>
            
  <form id="withdrawForm">
    <select id="withdrawMethod">
      <option value="Easypaisa">Easypaisa</option>
      <option value="JazzCash">JazzCash</option>
      <option value="Bank">Allid Bank</option>
      <option value="Bitget">Bitget USDT 12$ </option>
    </select><br>
    <input type="text" id="withdrawAccount" placeholder="Enter Account Number" required><br>
    <input type="number" id="withdrawAmount" placeholder="minimum withdrawal 1200" required><br>
    <button type="submit" class="submitBtn">Request Withdrawal</button>
  </form>
  <div id="withdrawList"></div>
</section>

<section id="profile">
  <h2>My Profile</h2>
  <div class="profile-card">
    <div class="profile-header">
      <!-- Profile Picture or Initials -->
      <div id="userProfilePic" class="profile-pic"></div>
      <div class="profile-info">
        <h2 id="userName"></h2>
        <p id="userEmail"></p>
        <p>Referral Code: <span id="userRef" class="referral-code"></span></p>
      </div>
    </div>
    <div class="profile-stats">
      <div class="stat-item">
        <p>Account Balance</p>
        <h3>â‚¹<span id="walletBalanceProfile">0</span></h3>
      </div>
      <div class="stat-item">
        <p>Total Referrals</p>
        <h3 id="totalReferralsCount">0</h3>
      </div>
    </div>
    <div class="profile-actions">
      <button id="editProfileBtn">Edit Profile</button>
    </div>
  </div>
</section>

<!-- The Modal (remains the same) -->
<div id="detailsModal" class="modal">
  <div class="modal-content">
    <span class="modal-close-btn">&times;</span>
    <h2 id="modalTitle"></h2>
    <div id="modalText"></div>
  </div>
</div>

<!-- --- UPDATED FOOTER HTML STRUCTURE --- -->
<footer>
  <div class="footer-links">
    <a id="privacyBtn">Privacy Policy</a>
    <a id="termsBtn">Terms of Service</a>
    <a id="aboutBtn">About Us</a>
    <a id="taskDetailsBtn">Task Details</a>
    <a id="withdrawalProfileBtn">Withdrawal Profile</a>
    <!-- Contact Links -->
    <a id="contactEmailLink">Contact via Email</a>
    <a id="contactWhatsappLink">Contact via WhatsApp</a>
  </div>
  <p class="copyright">&copy; 2025 Free Earnings App. All Rights Reserved.</p>
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, collection, doc, onSnapshot, setDoc, addDoc, getDoc, getCountFromServer, Timestamp, query, where } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

// Firebase config (remains the same)
const firebaseConfig = {
    apiKey: "AIzaSyDNYv9SNUjMAHlaPzfovyYefoBNDgx4Gd4",
    authDomain: "traffic-exchange-62a58.firebaseapp.com",
    projectId: "traffic-exchange-62a58",
    storageBucket: "traffic-exchange-62a58.appspot.com",
    messagingSenderId: "474999317287",
    appId: "1:474999317287:web:8e28a2f5f1a959d8ce3f02",
    measurementId: "G-HJQ46RQNZS"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth();

// --- Configuration ---
const adminEmail = "mn1691316@gmail.com"; // <<< Your provided email
const whatsappNumber = "+923495144924";   // <<< Your provided WhatsApp number (with country code)

// Auth (Existing Code)
document.getElementById("signupBtn").addEventListener("click", async () => {
  const name = document.getElementById("signupName").value;
  const email = document.getElementById("signupEmail").value;
  const password = document.getElementById("signupPassword").value;
  if (!name || !email || !password) { alert("Fill all fields"); return; }

  if (!name || name.trim().length === 0) {
    alert("Please enter your name.");
    return;
  }

  try {
    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
    const user = userCredential.user;
    await setDoc(doc(db, "users", user.uid), {
      name: name,
      email: email,
      wallet: 0,
      referralCode: user.uid, // Use UID as referral code
      referredBy: new URLSearchParams(window.location.search).get("ref") || null,
      profilePicUrl: null,
      createdAt: Timestamp.now()
    });
    alert("Sign Up Successful! Please log in.");
    location.reload(); // Reload to show login form
  } catch (error) {
    alert(error.message);
  }
});

document.getElementById("loginBtn").addEventListener("click", () => {
  const email = document.getElementById("loginEmail").value;
  const password = document.getElementById("loginPassword").value;
  signInWithEmailAndPassword(auth, email, password)
    .then(() => { location.reload(); })
    .catch(err => alert(err.message));
});

document.getElementById("logoutBtn").addEventListener("click", () => {
  signOut(auth).then(() => { location.reload(); });
});

// Navigation (Existing Code)
document.querySelectorAll('nav button[data-section]').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
    document.getElementById(btn.dataset.section).classList.add('active');
  });
});

function showSection(id) {
  document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
showSection('authSection'); // default

// --- NEW FUNCTIONALITY: Link/Task Open Tracking and Timer ---
const OPEN_COOLDOWN_MINUTES = 1;
const COOLDOWN_DURATION_MS = OPEN_COOLDOWN_MINUTES * 60 * 1000;

// Function to update button state with a countdown
function updateButtonState(button, itemId, prefix) {
  const lastOpened = localStorage.getItem(`${prefix}_${itemId}`);
  if (!lastOpened) {
    button.disabled = false;
    button.innerText = "Open & Earn Rs.0.25";
    return;
  }

  const timeElapsed = new Date().getTime() - parseInt(lastOpened);

  if (timeElapsed < COOLDOWN_DURATION_MS) {
    button.disabled = true;

    // Start a countdown interval
    const countdownInterval = setInterval(() => {
      const newTimeElapsed = new Date().getTime() - parseInt(lastOpened);
      if (newTimeElapsed >= COOLDOWN_DURATION_MS) {
        clearInterval(countdownInterval);
        button.disabled = false;
        button.innerText = "Open & Earn Rs.025";
        localStorage.removeItem(`${prefix}_${itemId}`); // Clean up storage
      } else {
        const timeLeftMs = COOLDOWN_DURATION_MS - newTimeElapsed;
        const minutes = Math.floor(timeLeftMs / 60000);
        const seconds = Math.floor((timeLeftMs % 60000) / 1000).toString().padStart(2, '0');
        button.innerText = `Wait ${minutes}:${seconds}`;
      }
    }, 1000);
    // Store interval ID to prevent multiple intervals on the same button
    button.dataset.intervalId = countdownInterval;
  } else {
    // If cooldown has already expired
    button.disabled = false;
    button.innerText = "Open & Earn â‚¹0.50";
    localStorage.removeItem(`${prefix}_${itemId}`);
  }
}

// Function to clear all countdown intervals when logging out or changing sections
function clearAllCountdowns() {
    document.querySelectorAll('[data-interval-id]').forEach(btn => {
        clearInterval(parseInt(btn.dataset.intervalId));
    });
}


onAuthStateChanged(auth, async user => {
  const nav = document.querySelector("nav");
  if (user) {
    document.getElementById("authSection").style.display = "none";
    nav.style.display = "flex";
    showSection('dashboard'); // Show dashboard by default after login

    const usersCol = collection(db, "users");
    const userRef = doc(db, "users", user.uid);
    const tasksCol = collection(db, "tasks");
    const linksCol = collection(db, "links");
    const withdrawalsCol = collection(db, "withdrawals");

    // Profile & Wallet Data (including referral count and profile picture logic)
    onSnapshot(userRef, async snap => {
      if (snap.exists()) {
        const data = snap.data();
        document.getElementById("userName").innerText = data.name || "N/A";
        document.getElementById("userEmail").innerText = data.email || user.email;
        document.getElementById("userRef").innerText = data.referralCode || user.uid;
        document.getElementById("refLink").value = window.location.origin + window.location.pathname + "?ref=" + (data.referralCode || user.uid);
        document.getElementById("walletBalance").innerText = data.wallet || 0;
        document.getElementById("walletBalanceProfile").innerText = data.wallet || 0;

        const userProfilePicElement = document.getElementById("userProfilePic");
        if (data.profilePicUrl) {
          userProfilePicElement.innerHTML = '';
          userProfilePicElement.style.backgroundImage = `url(${data.profilePicUrl})`;
        } else if (data.name) {
          const initials = data.name.trim().split(' ').map(word => word[0]).join('').toUpperCase();
          userProfilePicElement.innerText = initials;
          userProfilePicElement.style.backgroundImage = 'none';
          const colors = ['#1abc9c', '#3498db', '#9b59b6', '#f1c40f', '#e67e22', '#e74c3c'];
          userProfilePicElement.style.backgroundColor = colors[initials.charCodeAt(0) % colors.length];
        } else {
          userProfilePicElement.innerText = '?';
        }

        const referralQuery = query(usersCol, where("referredBy", "==", user.uid));
        const referralSnapshot = await getCountFromServer(referralQuery);
        document.getElementById("totalReferralsCount").innerText = referralSnapshot.data().count;
      }
    });

    // MODIFIED Tasks section with cooldown logic
    onSnapshot(tasksCol, snap => {
      const container = document.getElementById("tasksContainer");
      container.innerHTML = "";
      clearAllCountdowns();
      snap.forEach(docSnap => {
        const t = docSnap.data();
        const taskId = docSnap.id;
        const taskDiv = document.createElement("div");
        taskDiv.classList.add("taskBox");
        taskDiv.innerHTML = `<p>${t.description}</p><button class="submitBtn">Open & Earn Rs.0.25</button>`;
        const button = taskDiv.querySelector("button");

        updateButtonState(button, taskId, 'task'); // Check and set initial state

        button.addEventListener("click", async () => {
          window.open(t.url, "_blank");
          localStorage.setItem(`task_${taskId}`, new Date().getTime().toString());
          updateButtonState(button, taskId, 'task'); // Update state immediately after click

          const userSnap = await getDoc(userRef);
          const currentWallet = userSnap.data().wallet || 0;
          await setDoc(userRef, { wallet: currentWallet + 0.25 }, { merge: true });
          alert("You earned Rs.0.25! Wallet updated.");
        });
        container.appendChild(taskDiv);
      });
    });

    // MODIFIED Links section with cooldown logic
    onSnapshot(linksCol, snap => {
      const container = document.getElementById("linksContainer");
      container.innerHTML = "";
      clearAllCountdowns();
      snap.forEach(docSnap => {
        const l = docSnap.data();
        const linkId = docSnap.id;
        const linkDiv = document.createElement("div");
        linkDiv.classList.add("linkBox");
        linkDiv.innerHTML = `<p>${l.description}</p><button class="submitBtn">Open & Earn RS.0.25</button>`;
        const button = linkDiv.querySelector("button");

        updateButtonState(button, linkId, 'link'); // Check and set initial state

        button.addEventListener("click", async () => {
          window.open(l.url, "_blank");
          localStorage.setItem(`link_${linkId}`, new Date().getTime().toString());
          updateButtonState(button, linkId, 'link'); // Update state immediately after click

          const userSnap = await getDoc(userRef);
          const currentWallet = userSnap.data().wallet || 0;
          await setDoc(userRef, { wallet: currentWallet + 0.25 }, { merge: true });
          alert("You earned Rs.0.25! Wallet updated.");
        });
        container.appendChild(linkDiv);
      });
    });


    // Referral Users
    onSnapshot(query(usersCol, where("referredBy", "==", user.uid)), snap => {
        const refContainer = document.getElementById("refUsers");
        refContainer.innerHTML = "";
        snap.forEach(doc => {
            const u = doc.data();
            refContainer.innerHTML += `<p>${u.name} (${u.email})</p>`;
        });
    });

    // Withdrawals
    document.getElementById("withdrawForm").addEventListener("submit", async e => {
      e.preventDefault();
      const method = document.getElementById("withdrawMethod").value;
      const amount = parseFloat(document.getElementById("withdrawAmount").value);
      const account = document.getElementById("withdrawAccount").value;

      if (!account) { alert("Enter account number"); return; }
      const userSnap = await getDoc(userRef);
      const currentWallet = userSnap.data().wallet || 0;
      if (currentWallet < amount) { alert("Insufficient balance."); return; }

      await setDoc(userRef, { wallet: currentWallet - amount }, { merge: true });
      await addDoc(withdrawalsCol, {
        userId: user.uid,
        method: method,
        accountNumber: account,
        amount: amount,
        status: "Pending",
        timestamp: Timestamp.now()
      });
      alert("Withdrawal request sent!");
      e.target.reset();
    });

    onSnapshot(query(withdrawalsCol, where("userId", "==", user.uid)), snap => {
      const container = document.getElementById("withdrawList");
      container.innerHTML = "";
      snap.forEach(doc => {
        const w = doc.data();
        const withdrawDiv = document.createElement("div");
        withdrawDiv.classList.add("withdrawBox");
        let statusClass = 'status-' + w.status.toLowerCase();
        withdrawDiv.innerHTML = `
          <p><strong>Method:</strong> ${w.method}</p>
          <p><strong>Account:</strong> ${w.accountNumber}</p>
          <p><strong>Amount:</strong> â‚¹${w.amount.toFixed(2)}</p>
          <p><strong>Status:</strong> <span class="${statusClass}">${w.status}</span></p>
        `;
        container.appendChild(withdrawDiv);
      });
    });

    // Dashboard Stats (Totals)
    onSnapshot(usersCol, snap => { document.getElementById("totalUsers").innerText = snap.size; });
    onSnapshot(tasksCol, snap => { document.getElementById("totalTasks").innerText = snap.size; });
    onSnapshot(withdrawalsCol, snap => {
      document.getElementById("totalWithdrawals").innerText = snap.size;
      let total = 0; snap.forEach(doc => { total += parseFloat(doc.data().amount || 0); });
      document.getElementById("totalEarnings").innerText = "â‚¹" + total.toFixed(2);
    });

  } else {
    document.getElementById("authSection").style.display = "block";
    nav.style.display = "none";
    showSection('authSection');
    clearAllCountdowns();
  }
});

// Modal Script
const modal = document.getElementById("detailsModal");
const modalTitle = document.getElementById("modalTitle");
const modalText = document.getElementById("modalText");
const closeBtn = document.getElementsByClassName("modal-close-btn")[0];

const modalContent = {
  privacy: {
    title: "Privacy Policy",
    text: `<p>This Privacy Policy describes how Free Earnings App (the "App", "we", "us", or "our") collects, uses, and discloses your information. Your privacy is of utmost importance to us.</p>
           <p><strong>1. Information We Collect</strong></p>
           <p>We collect information you provide directly to us when you create an account, such as your name, email address, and password. We also collect information related to your activity on the App, including tasks completed, earnings, withdrawal history, and referral information. We do not collect sensitive personal information.</p>
           <p><strong>2. How We Use Your Information</strong></p>
           <p>The information we collect is used to: </p>
           <ul>
            <li>Operate and maintain your account.</li>
            <li>Process transactions, including withdrawal requests.</li>
            <li>Verify your identity to prevent fraud.</li>
            <li>Communicate with you about your account, updates, and promotional offers.</li>
            <li>Monitor and analyze usage and trends to improve your experience.</li>
           </ul>
           <p><strong>3. Information Sharing and Disclosure</strong></p>
           <p>We are committed to not sharing your personal information with third parties without your consent, except in the following circumstances: </p>
           <ul>
            <li>To comply with a legal obligation, such as a court order or government request.</li>
            <li>To enforce our Terms of Service and protect the security and integrity of our App.</li>
            <li>In connection with a merger, acquisition, or sale of assets.</li>
           </ul>`
  },
  terms: {
    title: "Terms of Service",
    text: `<p>Welcome to Free Earnings App. By creating an account and using our services, you agree to be bound by the following terms and conditions.</p>
           <p><strong>1. User Eligibility and Account</strong></p>
           <p>You must be at least 18 years old to use this App. You are responsible for maintaining the confidentiality of your account password and for all activities that occur under your account. You agree to create only one account per person. Creating multiple accounts is a violation of our policy and will result in the termination of all associated accounts without any payment.</p>
           <p><strong>2. Prohibited Activities</strong></p>
           <ul>
            <li>Using any automated software, bots, or scripts to complete tasks.</li>
            <li>Creating fake or multiple accounts.</li>
            <li>Engaging in any activity that disrupts or interferes with our services.</li>
           </ul>
           <p><strong>3. Withdrawal Policy</strong></p>
           <p>The minimum withdrawal amount is â‚¹1200. All withdrawal requests are reviewed manually. We reserve the right to reject any withdrawal request if we suspect fraudulent activity or violation of our terms.</p>`
  },
  about: {
    title: "About Us",
    text: `<p>Welcome to Free Earnings App, your trusted platform for simple and reliable online earnings.</p>
           <p><strong>Our Mission</strong></p>
           <p>Our mission is to provide a straightforward and accessible opportunity for individuals to earn a supplementary income from the comfort of their homes. We aim to bridge the gap between businesses that need online engagement and users who are willing to provide it.</p>
           <p><strong>Our Commitment to You</strong></p>
           <p>We are committed to transparency, fairness, and reliability. We believe in building a strong, long-lasting relationship with our user community based on trust. Our dedicated support team is always available to assist you with any questions or issues.</p>`
  },
  taskDetails: {
    title: "Task Details & Earnings Guide",
    text: `<p>Understanding how tasks work is crucial for maximizing your income.</p>
           <p><strong>1. Types of Tasks:</strong></p>
           <ul>
            <li><strong>Website Visits/Clicks:</strong> Most tasks involve visiting a specified website and performing certain actions.</li>
            <li><strong>Content Engagement:</strong> This could include watching short videos or liking posts.</li>
           </ul>
            <p><strong>2. READ INSTRUCTIONS CAREFULLY:</strong></p>
            <p>Each task comes with a clear set of instructions. It is absolutely essential to read and follow these instructions precisely to get paid.</p>
           <p><strong>3. Verification Process:</strong></p>
           <p>Our system tracks your actions to verify task completion. Tasks that are deemed incomplete or fraudulent will not be credited.</p>`
  },
  withdrawalProfile: {
    title: "Withdrawal Profile Management",
    text: `<p>Managing your withdrawal profile correctly is vital for receiving your earnings securely and on time.</p>
           <p><strong>1. Available Withdrawal Methods:</strong></p>
           <ul>
            <li>Easypaisa</li>
            <li>JazzCash</li>
            <li>Pakistan Bank Transfer (Allied Bank)</li>
            <li>Bitget (Cryptocurrency)</li>
 <li> How to get the date of your payment
Payment dates are 19-22 and 28-31 of each month, from 9.00 am till 6.00 pm GMT.</li>
 <li> If these dates fall on weekends or holidays the payments will be processed on nearest business day.
Once you reach the minimum payout amount, the money is put on a two-week hold.
You will get the payout during the first payment period available after your hold period ends.</li>

 <li> For example:</li>
 <li> You reach the minimum payout amount on June 19. The two-week hold period ends on July 31. The next available payment period is July 19-22.</li>
 <li> You reach the minimum payout amount on June 26. The two-week hold period ends on July 14. The next available payment period is July 28-31.</li>

<li> In the Help Center, you can find a list of all the payment methods we offer. Please keep in mind that the availability of these payment methods may vary depending on your account.</li>
              
           <li>  This policy outlines the terms for withdrawing funds from your E-commerce Store wallet and the specific rules governing the use and withdrawal of bonus funds.</li>
           
           </ul>
           <p><strong>2. Setting Up Your Account:</strong></p>
           <p>Ensure you provide accurate account details. Incorrect information can lead to delays or loss of funds, for which we are not responsible.</p>
           <p><strong>3. Minimum Withdrawal Amount:</strong></p>
           <p>A minimum balance of <b>â‚¹1200 or 12 USDT (for Bitget)</b> is required.</p>
           <p><strong>4. Processing Time:</strong></p>
           <p>All requests are manually reviewed and processed within <b>1 weak to 2 weak hours</b>.</p>`
  }
};

function openModal(type) {
  modalTitle.innerText = modalContent[type].title;
  modalText.innerHTML = modalContent[type].text;
  modal.style.display = "block";
}

// Footer Link Event Listeners
document.getElementById("privacyBtn").onclick = () => openModal('privacy');
document.getElementById("termsBtn").onclick = () => openModal('terms');
document.getElementById("aboutBtn").onclick = () => openModal('about');
document.getElementById("taskDetailsBtn").onclick = () => openModal('taskDetails');
document.getElementById("withdrawalProfileBtn").onclick = () => openModal('withdrawalProfile');

// Contact Links
document.getElementById("contactEmailLink").addEventListener("click", () => {
  const subject = "Inquiry from Free Earnings App User";
  const body = `Hello,\nMy Email: ${auth.currentUser ? auth.currentUser.email : 'N/A'}\n\nMy Inquiry:\n`;
  window.location.href = `mailto:${adminEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
});

document.getElementById("contactWhatsappLink").addEventListener("click", () => {
  const prefillText = `Hello, I'm contacting you from the Free Earnings App. My Email: ${auth.currentUser ? auth.currentUser.email : 'N/A'}.`;
  window.open(`https://wa.me/${whatsappNumber}?text=${encodeURIComponent(prefillText)}`, "_blank");
});

closeBtn.onclick = () => {
  modal.style.display = "none";
};

window.onclick = (event) => {
  if (event.target == modal) {
    modal.style.display = "none";
  }
};
</script>

</body>
</html>
